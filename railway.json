{
  "$schema": "https://railway.app/schema.json",
  "name": "viviz-bulk-sender",
  "description": "WhatsApp Bulk Messaging SaaS Platform",
  "services": [
    {
      "name": "backend",
      "path": "backend",
      "builder": "DOCKERFILE",
      "dockerfilePath": "Dockerfile.production",
      "domains": [
        {
          "name": "viviz-api.up.railway.app"
        }
      ],
      "deploy": {
        "numReplicas": 1,
        "restartPolicy": "ON_FAILURE",
        "sleepTimeout": 300,
        "limitMemory": "512M",
        "limitCPU": "1000m"
      }
    },
    {
      "name": "frontend",
      "path": "frontend",
      "builder": "NIXPACKS",
      "nixpacksPlan": {
        "build": {
          "cmd": ["npm install && npm run build"]
        },
        "deploy": {
          "cmd": ["npx serve -s dist -l $PORT"]
        }
      },
      "domains": [
        {
          "name": "viviz.up.railway.app"
        }
      ],
      "deploy": {
        "numReplicas": 1,
        "restartPolicy": "ON_FAILURE"
      }
    },
    {
      "name": "celery-worker",
      "path": "backend",
      "builder": "DOCKERFILE",
      "dockerfilePath": "Dockerfile.production",
      "deploy": {
        "numReplicas": 1,
        "restartPolicy": "ON_FAILURE",
        "sleepTimeout": 300,
        "limitMemory": "512M",
        "limitCPU": "1000m"
      }
    }
  ],
  "databases": [
    {
      "name": "postgresql",
      "serviceName": "postgresql",
      "plan": "hobby"
    },
    {
      "name": "redis",
      "serviceName": "redis",
      "plan": "hobby"
    }
  ],
  "environment": "production"
}
